"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[44458],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,f=d["".concat(p,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},46300:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),r=n(50012);function o(e){let{path:t}=e;const[n]=(0,r.Nk)("docusaurus.tab.js-ts"),o=t.lastIndexOf("{"),i=t.slice(o+1,t.length-1),[s,p]=i.split(","),l=t.slice(0,o);return a.createElement("code",null,l+("js"===n?s:p))}},76511:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));n(46300);const o={title:"Migration from 0.15.X to 0.16.X"},i=void 0,s={unversionedId:"migration-guides/migrate-from-0-15-to-0-16",id:"version-0.16.0/migration-guides/migrate-from-0-15-to-0-16",title:"Migration from 0.15.X to 0.16.X",description:"What's new in 0.16.0?",source:"@site/versioned_docs/version-0.16.0/migration-guides/migrate-from-0-15-to-0-16.md",sourceDirName:"migration-guides",slug:"/migration-guides/migrate-from-0-15-to-0-16",permalink:"/docs/migration-guides/migrate-from-0-15-to-0-16",draft:!1,editUrl:"https://github.com/wasp-lang/wasp/edit/release/web/versioned_docs/version-0.16.0/migration-guides/migrate-from-0-15-to-0-16.md",tags:[],version:"0.16.0",frontMatter:{title:"Migration from 0.15.X to 0.16.X"},sidebar:"docs",previous:{title:"Wasp TypeScript config (*.wasp.ts)",permalink:"/docs/general/wasp-ts-config"},next:{title:"Migration from 0.14.X to 0.15.X",permalink:"/docs/migration-guides/migrate-from-0-14-to-0-15"}},p={},l=[{value:"What&#39;s new in 0.16.0?",id:"whats-new-in-0160",level:2},{value:"Env variables validation with Zod",id:"env-variables-validation-with-zod",level:3},{value:"How to migrate?",id:"how-to-migrate",level:2},{value:"1. Bump the Wasp version",id:"1-bump-the-wasp-version",level:3},{value:"1.1 Additional step for Wasp TS Config users",id:"11-additional-step-for-wasp-ts-config-users",level:4},{value:"2. Update the <code>package.json</code> file",id:"2-update-the-packagejson-file",level:3},{value:"3. Update the <code>tsconfig.json</code> file",id:"3-update-the-tsconfigjson-file",level:3},{value:"4. Enjoy your updated Wasp app",id:"4-enjoy-your-updated-wasp-app",level:3}],u={toc:l},d="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"whats-new-in-0160"},"What's new in 0.16.0?"),(0,r.kt)("h3",{id:"env-variables-validation-with-zod"},"Env variables validation with Zod"),(0,r.kt)("p",null,"Wasp now uses Zod to validate environment variables, allowing it to fail faster if something is misconfigured. This means you\u2019ll get more relevant error messages when running your app with incorrect env variables."),(0,r.kt)("p",null,"You can also use Zod to validate your own environment variables. Here\u2019s an example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// src/env.ts\nimport * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const serverEnvValidationSchema = defineEnvValidationSchema(\n  z.object({\n    STRIPE_API_KEY: z.string({\n      required_error: 'STRIPE_API_KEY is required.',\n    }),\n  })\n)\n\n// main.wasp\napp myApp {\n  ...\n  server: {\n    envValidationSchema: import { serverEnvValidationSchema } from \"@src/env\",\n  },\n}\n")),(0,r.kt)("p",null,"Read more about it in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/project/env-vars#custom-env-var-validations"},"env variables")," section of the docs."),(0,r.kt)("h2",{id:"how-to-migrate"},"How to migrate?"),(0,r.kt)("p",null,"To migrate your Wasp app from 0.15.X to 0.16.X, follow these steps:"),(0,r.kt)("h3",{id:"1-bump-the-wasp-version"},"1. Bump the Wasp version"),(0,r.kt)("p",null,"Update the version field in your Wasp file to ",(0,r.kt)("inlineCode",{parentName:"p"},"^0.16.0"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app MyApp {\n  wasp: {\n    // highlight-next-line\n    version: "^0.16.0"\n  },\n}\n')),(0,r.kt)("h4",{id:"11-additional-step-for-wasp-ts-config-users"},"1.1 Additional step for Wasp TS Config users"),(0,r.kt)("p",null,"If you're using ",(0,r.kt)("a",{parentName:"p",href:"/docs/general/wasp-ts-config"},"Wasp's new TS config"),", you must\nalso rerun the ",(0,r.kt)("inlineCode",{parentName:"p"},"wasp ts-setup")," command in your project. This command updates\nthe path for the ",(0,r.kt)("inlineCode",{parentName:"p"},"wasp-config")," package in your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,r.kt)("h3",{id:"2-update-the-packagejson-file"},"2. Update the ",(0,r.kt)("inlineCode",{parentName:"h3"},"package.json")," file"),(0,r.kt)("p",null,"Make sure to explicitly add ",(0,r.kt)("inlineCode",{parentName:"p"},"react-dom")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"react-router-dom")," to your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "dependencies": {\n    // highlight-start\n    "react-dom": "^18.2.0",\n    "react-router-dom": "^6.26.2"\n    // highlight-end\n  }\n}\n')),(0,r.kt)("h3",{id:"3-update-the-tsconfigjson-file"},"3. Update the ",(0,r.kt)("inlineCode",{parentName:"h3"},"tsconfig.json")," file"),(0,r.kt)("p",null,"Wasp now internally works with TypeScript project references, so you'll have to\nupdate your ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," (Wasp will validate your ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," and warn\nyou if you forget something). Here are all the properties you must change:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "compilerOptions": {\n    // ...\n    "composite": true,\n    "skipLibCheck": true,\n    "outDir": ".wasp/out/user"\n  },\n  "include": [\n    "src"\n  ]\n}\n')),(0,r.kt)("h3",{id:"4-enjoy-your-updated-wasp-app"},"4. Enjoy your updated Wasp app"),(0,r.kt)("p",null,"That's it!"),(0,r.kt)("p",null,"You should now be able to run your app with the new Wasp 0.16.0."))}c.isMDXComponent=!0}}]);