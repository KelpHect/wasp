"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1181],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),p=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(o.Provider,{value:n},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},v=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(t),v=r,m=d["".concat(o,".").concat(v)]||d[v]||c[v]||i;return t?a.createElement(m,s(s({ref:n},u),{},{components:t})):a.createElement(m,s({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=v;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l[d]="string"==typeof e?e:r,s[1]=l;for(var p=2;p<i;p++)s[p]=t[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}v.displayName="MDXCreateElement"},85162:(e,n,t)=>{t.d(n,{Z:()=>s});var a=t(67294),r=t(86010);const i={tabItem:"tabItem_Ymn6"};function s(e){let{children:n,hidden:t,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,s),hidden:t},n)}},74866:(e,n,t)=>{t.d(n,{Z:()=>E});var a=t(87462),r=t(67294),i=t(86010),s=t(12466),l=t(16550),o=t(91980),p=t(67392),u=t(50012);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}function c(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??d(t);return function(e){const n=(0,p.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function v(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.k6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o._X)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(a.location.search);n.set(i,e),a.replace({...a.location,search:n.toString()})}),[i,a])]}function h(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,i=c(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!v({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:i}))),[o,p]=m({queryString:t,groupId:a}),[d,h]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,i]=(0,u.Nk)(t);return[a,(0,r.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:a}),f=(()=>{const e=o??d;return v({value:e,tabValues:i})?e:null})();(0,r.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!v({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),h(e)}),[p,h,i]),tabValues:i}}var f=t(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:n,block:t,selectedValue:l,selectValue:o,tabValues:p}=e;const u=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),c=e=>{const n=e.currentTarget,t=u.indexOf(n),a=p[t].value;a!==l&&(d(n),o(a))},v=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;n=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;n=u[t]??u[u.length-1];break}}n?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},n)},p.map((e=>{let{value:n,label:t,attributes:s}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,key:n,ref:e=>u.push(e),onKeyDown:v,onClick:c},s,{className:(0,i.Z)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":l===n})}),t??n)})))}function y(e){let{lazy:n,children:t,selectedValue:a}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},i.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function b(e){const n=h(e);return r.createElement("div",{className:(0,i.Z)("tabs-container",g.tabList)},r.createElement(k,(0,a.Z)({},e,n)),r.createElement(y,(0,a.Z)({},e,n)))}function E(e){const n=(0,f.Z)();return r.createElement(b,(0,a.Z)({key:String(n)},e))}},46300:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(67294),r=t(50012);function i(e){let{path:n}=e;const[t]=(0,r.Nk)("docusaurus.tab.js-ts"),i=n.lastIndexOf("{"),s=n.slice(i+1,n.length-1),[l,o]=s.split(","),p=n.slice(0,i);return a.createElement("code",null,p+("js"===t?l:o))}},87587:(e,n,t)=>{t.d(n,{Fi:()=>l,Jp:()=>i,Vp:()=>r,aH:()=>s});var a=t(67294);const r=e=>{let{color:n,children:t}=e;return a.createElement("span",{style:{border:`2px solid ${n}`,display:"inline-block",padding:"0.2em 0.4em",color:n,borderRadius:"0.4em",fontSize:"0.8em",lineHeight:"1",fontWeight:"bold"}},t)};function i(){return a.createElement(r,{color:"#0b62f5"},"internal")}function s(){return a.createElement(r,{color:"#f59e0b"},"required")}function l(){return a.createElement(r,{color:"#08c47e"},"optional")}},27903:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>h,default:()=>E,frontMatter:()=>m,metadata:()=>f,toc:()=>k});var a=t(87462),r=t(67294),i=t(3905),s=(t(46300),t(85162)),l=t(74866);const o={toc:[]},p="wrapper";function u(e){let{components:n,...t}=e;return(0,i.kt)(p,(0,a.Z)({},o,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"Client Env Var Prefix",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Client env vars must be prefixed with ",(0,i.kt)("inlineCode",{parentName:"p"},"REACT_APP_"),", for example: ",(0,i.kt)("inlineCode",{parentName:"p"},"REACT_APP_SOME_VAR_NAME=...")," for security reasons. Wasp will only inject env vars that start with this prefix into the client code to prevent accidental exposure of sensitive information.")))}u.isMDXComponent=!0;var d=t(87587);function c(e){let{envVars:n}=e;return r.createElement("table",{className:"env-vars-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Name"),r.createElement("th",null,"Type"),r.createElement("th",null,"Notes"))),r.createElement("tbody",null,n.map((e=>r.createElement(v,(0,a.Z)({key:e.name},e))))))}function v(e){let{name:n,type:t,isRequired:a=!1,note:i,defaultValue:s}=e;const l=a?r.createElement(d.aH,null):r.createElement(d.Fi,null);return r.createElement("tr",null,r.createElement("td",null,r.createElement("code",null,n)),r.createElement("td",null,r.createElement("span",{className:"env-var-type"},r.createElement("span",null,t),r.createElement("span",null,l)),s&&r.createElement("span",{className:"env-var-default"},"Default: ",r.createElement("code",null,s))),r.createElement("td",null,i))}const m={title:"Env Variables"},h=void 0,f={unversionedId:"project/env-vars",id:"version-0.16.0/project/env-vars",title:"Env Variables",description:"Environment variables are used to configure projects based on the context in which they run. This allows them to exhibit different behaviors in different environments, such as development, staging, or production.",source:"@site/versioned_docs/version-0.16.0/project/env-vars.md",sourceDirName:"project",slug:"/project/env-vars",permalink:"/docs/project/env-vars",draft:!1,editUrl:"https://github.com/wasp-lang/wasp/edit/release/web/versioned_docs/version-0.16.0/project/env-vars.md",tags:[],version:"0.16.0",frontMatter:{title:"Env Variables"},sidebar:"docs",previous:{title:"Static Asset Handling",permalink:"/docs/project/static-assets"},next:{title:"Testing",permalink:"/docs/project/testing"}},g={},k=[{value:"Client Env Vars",id:"client-env-vars",level:2},{value:"Wasp Client Env Vars",id:"wasp-client-env-vars",level:3},{value:"General Configuration",id:"client-general-configuration",level:4},{value:"Server Env Vars",id:"server-env-vars",level:2},{value:"Wasp Server Env Vars",id:"wasp-server-env-vars",level:3},{value:"General Configuration",id:"server-general-configuration",level:4},{value:"SMTP Email Sender",id:"smtp-email-sender",level:4},{value:"SendGrid Email Sender",id:"sendgrid-email-sender",level:4},{value:"Mailgun Email Sender",id:"mailgun-email-sender",level:4},{value:"OAuth Providers",id:"oauth-providers",level:4},{value:"Jobs",id:"jobs",level:4},{value:"Development",id:"development",level:4},{value:"Defining Env Vars in Development",id:"defining-env-vars-in-development",level:2},{value:"1. Using .env (dotenv) Files",id:"1-using-env-dotenv-files",level:3},{value:"2. Using Shell",id:"2-using-shell",level:3},{value:"Defining Env Vars in Production",id:"defining-env-vars-in-production",level:2},{value:"Custom Env Var Validations",id:"custom-env-var-validations",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Client Env Vars",id:"client-env-vars-1",level:3},{value:"User-defined env vars validation",id:"user-defined-env-vars-validation",level:4},{value:"Accessing env vars in client code",id:"accessing-env-vars-in-client-code",level:4},{value:"Server Env Vars",id:"server-env-vars-1",level:3},{value:"User-defined env vars validation",id:"user-defined-env-vars-validation-1",level:4},{value:"Accessing env vars in server code",id:"accessing-env-vars-in-server-code",level:4}],y={toc:k},b="wrapper";function E(e){let{components:n,...r}=e;return(0,i.kt)(b,(0,a.Z)({},y,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Environment variables")," are used to configure projects based on the context in which they run. This allows them to exhibit different behaviors in different environments, such as development, staging, or production."),(0,i.kt)("p",null,"For instance, ",(0,i.kt)("em",{parentName:"p"},"during development"),", you may want your project to connect to a local development database running on your machine, but ",(0,i.kt)("em",{parentName:"p"},"in production"),", you want it to connect to the production database. Similarly, in development, you may want to use a test Stripe account, while in production, your app should use a real Stripe account."),(0,i.kt)("p",null,"While some env vars are required by Wasp, such as the database connection or secrets for social auth, you can also define your env vars for any other useful purposes, and then access them in the code."),(0,i.kt)("p",null,"Let's go over the available env vars in Wasp, how to define them, and how to use them in your project."),(0,i.kt)("h2",{id:"client-env-vars"},"Client Env Vars"),(0,i.kt)("p",null,"Client environment variables are injected into the client Javascript code during the build process, making them public and readable by anyone. Therefore, you should ",(0,i.kt)("strong",{parentName:"p"},"never store secrets in them")," (such as secret API keys, you should store secrets in the server env variables)."),(0,i.kt)(u,{mdxType:"ClientEnvVarsNote"}),(0,i.kt)("p",null,"You can read them from the client code like this:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/App.js"',title:'"src/App.js"'},"import { env } from 'wasp/client'\n\nconsole.log(env.REACT_APP_SOME_VAR_NAME)\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/App.ts"',title:'"src/App.ts"'},"import { env } from 'wasp/client'\n\nconsole.log(env.REACT_APP_SOME_VAR_NAME)\n")))),(0,i.kt)("p",null,"Read more about the ",(0,i.kt)("inlineCode",{parentName:"p"},"env")," object in the ",(0,i.kt)("a",{parentName:"p",href:"#client-env-vars-1"},"API reference"),"."),(0,i.kt)("h3",{id:"wasp-client-env-vars"},"Wasp Client Env Vars"),(0,i.kt)("p",null,"Here are the client env vars that Wasp defines:"),(0,i.kt)("h4",{id:"client-general-configuration"},"General Configuration"),(0,i.kt)("p",null,"These are some general env variables used for various Wasp features:"),(0,i.kt)(c,{envVars:[{name:"REACT_APP_API_URL",type:"URL",isRequired:!1,defaultValue:"http://localhost:3001",note:"The client uses this as the server URL."}],mdxType:"EnvVarsTable"}),(0,i.kt)("h2",{id:"server-env-vars"},"Server Env Vars"),(0,i.kt)("p",null,"You can store secret values (e.g. secret API keys) in the server env variables since they are not publicly readable. You can define them without any special prefix, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"SOME_VAR_NAME=..."),"."),(0,i.kt)("p",null,"You can read the env vars from server code like this:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { env } from 'wasp/server'\n\nconsole.log(env.SOME_VAR_NAME)\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { env } from 'wasp/server'\n\nconsole.log(env.SOME_VAR_NAME)\n")))),(0,i.kt)("p",null,"Read more about the ",(0,i.kt)("inlineCode",{parentName:"p"},"env")," object in the ",(0,i.kt)("a",{parentName:"p",href:"#server-env-vars-1"},"API reference"),"."),(0,i.kt)("h3",{id:"wasp-server-env-vars"},"Wasp Server Env Vars"),(0,i.kt)("h4",{id:"server-general-configuration"},"General Configuration"),(0,i.kt)("p",null,"These are some general env variables used for various Wasp features:"),(0,i.kt)(c,{envVars:[{name:"DATABASE_URL",type:"String",isRequired:!0,note:"The URL of the PostgreSQL database you want your app to use."},{name:"WASP_WEB_CLIENT_URL",type:"URL",isRequired:!0,note:"Server uses this value as your client URL in various features e.g. linking to your app in e-mails."},{name:"WASP_SERVER_URL",type:"URL",isRequired:!0,note:"Server uses this value as your server URL in various features e.g. to redirect users when logging in with OAuth providers like Google or GitHub."},{name:"JWT_SECRET",type:"String",isRequired:!0,note:(0,i.kt)("span",null,"Needed to generate secure tokens. ",(0,i.kt)("a",{href:"https://jwtsecret.com/generate",target:"_blank",rel:"noreferrer"},"Generate")," a random string at least 32 characters long.")},{name:"PORT",type:"Integer",isRequired:!1,defaultValue:"3001",note:"This is where the server listens for requests."}],mdxType:"EnvVarsTable"}),(0,i.kt)("h4",{id:"smtp-email-sender"},"SMTP Email Sender"),(0,i.kt)("p",null,"If you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"SMTP")," as your email sender, you need to provide the following environment variables:"),(0,i.kt)(c,{envVars:[{name:"SMTP_HOST",type:"String",isRequired:!0,note:"The SMTP server host."},{name:"SMTP_PORT",type:"Integer",isRequired:!0,note:"The SMTP server port."},{name:"SMTP_USERNAME",type:"String",isRequired:!0,note:"The SMTP server username."},{name:"SMTP_PASSWORD",type:"String",isRequired:!0,note:"The SMTP server password."}],mdxType:"EnvVarsTable"}),(0,i.kt)("h4",{id:"sendgrid-email-sender"},"SendGrid Email Sender"),(0,i.kt)("p",null,"If you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"SendGrid")," as your email sender, you need to provide the following environment variables:"),(0,i.kt)(c,{envVars:[{name:"SENDGRID_API_KEY",type:"String",isRequired:!0,note:"The SendGrid API key."}],mdxType:"EnvVarsTable"}),(0,i.kt)("h4",{id:"mailgun-email-sender"},"Mailgun Email Sender"),(0,i.kt)("p",null,"If you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"Mailgun")," as your email sender, you need to provide the following environment variables:"),(0,i.kt)(c,{envVars:[{name:"MAILGUN_API_KEY",type:"String",isRequired:!0,note:"The Mailgun API key."},{name:"MAILGUN_DOMAIN",type:"String",isRequired:!0,note:"The Mailgun domain."},{name:"MAILGUN_API_URL",type:"URL",isRequired:!1,note:(0,i.kt)("span",null,"Useful if you want to use the EU API endpoint (",(0,i.kt)("code",null,"https://api.eu.mailgun.net"),").")}],mdxType:"EnvVarsTable"}),(0,i.kt)("h4",{id:"oauth-providers"},"OAuth Providers"),(0,i.kt)("p",null,"If you are using OAuth, you need to provide the following environment variables:"),(0,i.kt)(c,{envVars:[{name:"<PROVIDER_NAME>_CLIENT_ID",type:"String",isRequired:!0,note:"The client ID provided by the OAuth provider."},{name:"<PROVIDER_NAME>_CLIENT_SECRET",type:"String",isRequired:!0,note:"The client secret provided by the OAuth provider."}],mdxType:"EnvVarsTable"}),(0,i.kt)("small",null,(0,i.kt)("p",null,"*"," ",(0,i.kt)("inlineCode",{parentName:"p"},"<PROVIDER_NAME>")," is the uppercase name of the provider you are using. For example, if you are using Google OAuth, you need to provide the ",(0,i.kt)("inlineCode",{parentName:"p"},"GOOGLE_CLIENT_ID")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"GOOGLE_CLIENT_SECRET")," environment variables.")),(0,i.kt)("p",null,"If you are using ",(0,i.kt)("a",{parentName:"p",href:"/docs/auth/social-auth/keycloak"},"Keycloak"),", you'll need to provide one extra environment variable:"),(0,i.kt)(c,{envVars:[{name:"KEYCLOAK_REALM_URL",type:"URL",isRequired:!0,note:"The URL of the Keycloak realm."}],mdxType:"EnvVarsTable"}),(0,i.kt)("h4",{id:"jobs"},"Jobs"),(0,i.kt)(c,{envVars:[{name:"PG_BOSS_NEW_OPTIONS",type:"String",isRequired:!1,note:(0,i.kt)("span",null,"It's parsed as JSON. Enables you to provide ",(0,i.kt)("a",{href:"../advanced/jobs#declaring-jobs"},"custom config")," for PgBoss.")}],mdxType:"EnvVarsTable"}),(0,i.kt)("h4",{id:"development"},"Development"),(0,i.kt)("p",null,"We provide some helper env variables in development:"),(0,i.kt)(c,{envVars:[{name:"SKIP_EMAIL_VERIFICATION_IN_DEV",type:"Boolean",isRequired:!1,defaultValue:"false",note:"If set to true, automatically sets user emails as verified in development."}],mdxType:"EnvVarsTable"}),(0,i.kt)("h2",{id:"defining-env-vars-in-development"},"Defining Env Vars in Development"),(0,i.kt)("p",null,"During development (",(0,i.kt)("inlineCode",{parentName:"p"},"wasp start"),"), there are two ways to provide env vars to your Wasp project:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Using ",(0,i.kt)("inlineCode",{parentName:"li"},".env")," files. ",(0,i.kt)("strong",{parentName:"li"},"(recommended)")),(0,i.kt)("li",{parentName:"ol"},"Using shell. (useful for overrides)")),(0,i.kt)("h3",{id:"1-using-env-dotenv-files"},"1. Using .env (dotenv) Files"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Env vars usage in development",src:t(49295).Z,width:"908",height:"672"})),(0,i.kt)("p",null,"This is the recommended method for providing env vars to your Wasp project during development."),(0,i.kt)("p",null,"In the root of your Wasp project you can create two distinct files:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},".env.server")," for env vars that will be provided to the server.")),(0,i.kt)("p",null,"Variables are defined in these files in the form of ",(0,i.kt)("inlineCode",{parentName:"p"},"NAME=VALUE"),", for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title=".env.server"',title:'".env.server"'},"DATABASE_URL=postgresql://localhost:5432\nSOME_VAR_NAME=somevalue\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},".env.client")," for env vars that will be provided to the client."),(0,i.kt)("p",{parentName:"li"},"Variables are defined in these files in the form of ",(0,i.kt)("inlineCode",{parentName:"p"},"NAME=VALUE"),", for example:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title=".env.client"',title:'".env.client"'},"REACT_APP_SOME_VAR_NAME=somevalue\n")),(0,i.kt)(u,{mdxType:"ClientEnvVarsNote"}))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},".env.server")," should not be committed to version control as it can contain secrets, while ",(0,i.kt)("inlineCode",{parentName:"p"},".env.client")," can be versioned as it must not contain any secrets.\nBy default, in the ",(0,i.kt)("inlineCode",{parentName:"p"},".gitignore")," file that comes with a new Wasp app, we ignore all dotenv files."),(0,i.kt)("h3",{id:"2-using-shell"},"2. Using Shell"),(0,i.kt)("p",null,"If you set environment variables in the shell where you run your Wasp commands (e.g., ",(0,i.kt)("inlineCode",{parentName:"p"},"wasp start"),"), Wasp will recognize them."),(0,i.kt)("p",null,"You can set environment variables in the ",(0,i.kt)("inlineCode",{parentName:"p"},".profile")," or a similar file, which will set them permanently, or you can set them temporarily by defining them at the start of a command (",(0,i.kt)("inlineCode",{parentName:"p"},"SOME_VAR_NAME=SOMEVALUE wasp start"),")."),(0,i.kt)("p",null,"This is not specific to Wasp and is simply how environment variables can be set in the shell."),(0,i.kt)("p",null,"Defining environment variables in this way can be cumbersome even for a single project and even more challenging to manage if you have multiple Wasp projects. Therefore, we do not recommend this as a default method for providing environment variables to Wasp projects during development, you should use .env files instead. However, it can be useful for occasionally ",(0,i.kt)("strong",{parentName:"p"},"overriding")," specific environment variables because environment variables set this way ",(0,i.kt)("strong",{parentName:"p"},"take precedence over those defined in ",(0,i.kt)("inlineCode",{parentName:"strong"},".env")," files"),"."),(0,i.kt)("h2",{id:"defining-env-vars-in-production"},"Defining Env Vars in Production"),(0,i.kt)("p",null,"Defining env variables in production will depend on where you are deploying your Wasp project. In general, you will define them via mechanisms that your hosting provider provides."),(0,i.kt)("p",null,"We talk about how to define env vars for each deployment option in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/deployment/env-vars"},"deployment section"),"."),(0,i.kt)("h2",{id:"custom-env-var-validations"},"Custom Env Var Validations"),(0,i.kt)("p",null,"If your code requires some environment variables, you usually want to ensure that they are correctly defined. In Wasp, you can define your environment variables validation by defining a ",(0,i.kt)("a",{parentName:"p",href:"https://zod.dev/?id=basic-usage"},"Zod object schema")," and telling Wasp to use it."),(0,i.kt)("admonition",{title:"What is Zod?",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("a",{parentName:"p",href:"https://zod.dev/"},"Zod")," is a library that lets you define what you expect from your data. For example, you can use Zod to define that:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"A value should be a string that's a valid email address."),(0,i.kt)("li",{parentName:"ul"},"A value should be a number between 0 and 100."),(0,i.kt)("li",{parentName:"ul"},"... and much more."))),(0,i.kt)("p",null,"Take a look at an example of defining env vars validation:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/env.js"',title:'"src/env.js"'},"import * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const serverEnvValidationSchema = defineEnvValidationSchema(\n  z.object({\n    STRIPE_API_KEY: z.string({\n      required_error: 'STRIPE_API_KEY is required.',\n    }),\n  })\n)\n\nexport const clientEnvValidationSchema = defineEnvValidationSchema(\n  z.object({\n    REACT_APP_NAME: z.string().default('TODO App'),\n  })\n)\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/env.ts"',title:'"src/env.ts"'},"import * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const serverEnvValidationSchema = defineEnvValidationSchema(\n  z.object({\n    STRIPE_API_KEY: z.string({\n      required_error: 'STRIPE_API_KEY is required.',\n    }),\n  })\n)\n\nexport const clientEnvValidationSchema = defineEnvValidationSchema(\n  z.object({\n    REACT_APP_NAME: z.string().default('TODO App'),\n  })\n)\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"defineEnvValidationSchema")," function ensures your Zod schema is type-checked."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app myApp {\n  ...\n  client: {\n    envValidationSchema: import { clientEnvValidationSchema } from "@src/env",\n  },\n  server: {\n    envValidationSchema: import { serverEnvValidationSchema } from "@src/env",\n  },\n}\n')),(0,i.kt)("p",null,"You defined schemas for both the client and the server env vars and told Wasp to use them. Wasp merges your env validation schemas with the built-in env vars validation schemas when it validates the ",(0,i.kt)("inlineCode",{parentName:"p"},"process.env")," object on the server and the ",(0,i.kt)("inlineCode",{parentName:"p"},"import.meta.env")," object on the client."),(0,i.kt)("p",null,"This means you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"env")," object to access ",(0,i.kt)("strong",{parentName:"p"},"your env vars")," like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/stripe.ts"',title:'"src/stripe.ts"'},"import { env } from 'wasp/server'\n\nconst stripeApiKey = env.STRIPE_API_KEY\n")),(0,i.kt)("p",null,"Read more about the env object in the ",(0,i.kt)("a",{parentName:"p",href:"#api-reference"},"API Reference"),"."),(0,i.kt)("h2",{id:"api-reference"},"API Reference"),(0,i.kt)("p",null,"There are ",(0,i.kt)("strong",{parentName:"p"},"Wasp-defined")," and ",(0,i.kt)("strong",{parentName:"p"},"user-defined")," env vars. Wasp already comes with built-in validation for Wasp-defined env vars. For your env vars, you can define your own validation."),(0,i.kt)("h3",{id:"client-env-vars-1"},"Client Env Vars"),(0,i.kt)("h4",{id:"user-defined-env-vars-validation"},"User-defined env vars validation"),(0,i.kt)("p",null,"You can define your client env vars validation like this:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/env.js"',title:'"src/env.js"'},"import * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const envValidationSchema = defineEnvValidationSchema(\n  z.object({\n    REACT_APP_ANALYTICS_ID: z.string({\n      required_error: 'REACT_APP_ANALYTICS_ID is required.',\n    }),\n  })\n)\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/env.ts"',title:'"src/env.ts"'},"import * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const envValidationSchema = defineEnvValidationSchema(\n  z.object({\n    REACT_APP_ANALYTICS_ID: z.string({\n      required_error: 'REACT_APP_ANALYTICS_ID is required.',\n    }),\n  })\n)\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"defineEnvValidationSchema")," function ensures your Zod schema is type-checked."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app myApp {\n  ...\n  client: {\n    envValidationSchema: import { envValidationSchema } from "@src/env",\n  },\n}\n')),(0,i.kt)("p",null,"Wasp merges your env validation schemas with the built-in env vars validation schemas when it validates the ",(0,i.kt)("inlineCode",{parentName:"p"},"import.meta.env")," object."),(0,i.kt)("h4",{id:"accessing-env-vars-in-client-code"},"Accessing env vars in client code"),(0,i.kt)("p",null,"You can access both ",(0,i.kt)("strong",{parentName:"p"},"Wasp-defined")," and ",(0,i.kt)("strong",{parentName:"p"},"user-defined")," client env vars in your client code using the ",(0,i.kt)("inlineCode",{parentName:"p"},"env")," object:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/App.js"',title:'"src/App.js"'},"import { env } from 'wasp/client'\n\n// Wasp-defined\nconst apiUrl = env.REACT_APP_API_URL\n\n// User-defined\nconst analyticsId = env.REACT_APP_ANALYTICS_ID\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/App.ts"',title:'"src/App.ts"'},"import { env } from 'wasp/client'\n\n// Wasp-defined\nconst apiUrl = env.REACT_APP_API_URL\n\n// User-defined\nconst analyticsId = env.REACT_APP_ANALYTICS_ID\n")))),(0,i.kt)("p",null,"You can use ",(0,i.kt)("inlineCode",{parentName:"p"},"import.meta.env.REACT_APP_SOME_VAR_NAME")," directly in your code. We don't recommend this since ",(0,i.kt)("inlineCode",{parentName:"p"},"import.meta.env")," isn't validated and missing env vars can cause runtime errors."),(0,i.kt)("h3",{id:"server-env-vars-1"},"Server Env Vars"),(0,i.kt)("h4",{id:"user-defined-env-vars-validation-1"},"User-defined env vars validation"),(0,i.kt)("p",null,"You can define your env vars validation like this:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/env.js"',title:'"src/env.js"'},"import * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const envValidationSchema = defineEnvValidationSchema(\n  z.object({\n    STRIPE_API_KEY: z.string({\n      required_error: 'STRIPE_API_KEY is required.',\n    }),\n  })\n)\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/env.ts"',title:'"src/env.ts"'},"import * as z from 'zod'\n\nimport { defineEnvValidationSchema } from 'wasp/env'\n\nexport const envValidationSchema = defineEnvValidationSchema(\n  z.object({\n    STRIPE_API_KEY: z.string({\n      required_error: 'STRIPE_API_KEY is required.',\n    }),\n  })\n)\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"defineEnvValidationSchema")," function ensures your Zod schema is type-checked."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-wasp",metastring:'title="main.wasp"',title:'"main.wasp"'},'app myApp {\n  ...\n  server: {\n    envValidationSchema: import { envValidationSchema } from "@src/env",\n  },\n}\n')),(0,i.kt)("p",null,"Wasp merges your env validation schemas with the built-in env vars validation schemas when it validates the ",(0,i.kt)("inlineCode",{parentName:"p"},"process.env")," object."),(0,i.kt)("h4",{id:"accessing-env-vars-in-server-code"},"Accessing env vars in server code"),(0,i.kt)("p",null,"You can access both ",(0,i.kt)("strong",{parentName:"p"},"Wasp-defined")," and ",(0,i.kt)("strong",{parentName:"p"},"user-defined")," client env vars in your client code using the ",(0,i.kt)("inlineCode",{parentName:"p"},"env")," object:"),(0,i.kt)(l.Z,{groupId:"js-ts",mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/stripe.js"',title:'"src/stripe.js"'},"import { env } from 'wasp/server'\n\n// Wasp-defined\nconst serverUrl = env.WASP_SERVER_URL\n\n// User-defined\nconst stripeApiKey = env.STRIPE_API_KEY\n"))),(0,i.kt)(s.Z,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/stripe.ts"',title:'"src/stripe.ts"'},"import { env } from 'wasp/server'\n\n// Wasp-defined\nconst serverUrl = env.WASP_SERVER_URL\n\n// User-defined\nconst stripeApiKey = env.STRIPE_API_KEY\n")))),(0,i.kt)("p",null,"You can use ",(0,i.kt)("inlineCode",{parentName:"p"},"process.env.SOME_SECRET")," directly in your code. We don't recommend this since ",(0,i.kt)("inlineCode",{parentName:"p"},"process.env")," isn't validated and missing env vars can cause runtime errors."))}E.isMDXComponent=!0},49295:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/prod_dev_fade-e4097e7d9b64c62ca95bfde692e5115d.svg"}}]);